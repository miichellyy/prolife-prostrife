<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <title>Pro Life or Pro Strife?</title>
    <link rel="stylesheet" href="dropdown.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Roboto+Slab:wght@100;200;300;400;500;600;700;800;900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
        rel="stylesheet">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Roboto+Slab:wght@100;200;300;400;500;600;700;800;900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap');
    </style>

</head>

<body>
    <div class="body">
        <div class="header">
            <div class="container">
                <img src="./Images/header_12_8_22.svg" width="80%" height="auto">
                <h1> <span class="highlight2-container"><span class="highlight2">Pro-life</span></span>
                    or <span class="highlight-container"><span class="highlight">pro-strife</span></span>?</h1>

                <h2>Pro-life states with strict abortion laws are spending less money to support families and children,
                    making them some of the hardest places to raise a family.
                    <br>
                    <br>
                </h2>
                <br>
                <hr width="50%">
                <img src="./Images/Down-Arrow.png" width="20x">
                <br>


                <div class="imageContainer">
                    <h2>After the Supreme Court overturned Roe v. Wade, 28 states banned or restricted access to
                        abortion.
                    </h2>
                    <div class="image">
                        <img src="./Images/us_map_legend_abortion.svg" width="100%" height="auto"></div>
                    <div>

                    </div>

                    <div class="container">
                        <br>
                        <hr width="50%">
                        <img src="./Images/Down-Arrow.png" width="20x">
                        <br>
                    </div>

                    <div>

                        <div id="controls">
                            <h2>Where do you live? See how your state compares below. </h2>
                            <div id="sentence">
                                <span class="sentence">
                                    I live in
                                    <span id="hide-np">State</span>
                                </span>
                                <div class="menuContainer active onLoadClass" id="topicContainer">
                                    <select id="stateMenu" style="display: none" ;>
                                        <option value="">State</option>
                                        <option value="Alabama">Alabama</option>
                                        <option value="Alaska">Alaska</option>
                                        <option value="Arizona">Arizona</option>
                                        <option value="Arkansas">Arkansas</option>
                                        <option value="California">California</option>
                                        <option value="Colorado">Colorado</option>
                                        <option value="Connecticut">Connecticut</option>
                                        <option value="Delaware">Delaware</option>
                                        <option value="District of Columbia">The District of Columbia</option>
                                        <option value="Florida">Florida</option>
                                        <option value="Georgia">Georgia</option>
                                        <option value="Hawaii">Hawaii</option>
                                        <option value="Idaho">Idaho</option>
                                        <option value="Illinois">Illinois</option>
                                        <option value="Indiana">Indiana</option>
                                        <option value="Iowa">Iowa</option>
                                        <option value="Kansas">Kansas</option>
                                        <option value="Kentucky">Kentucky</option>
                                        <option value="Louisiana">Louisiana</option>
                                        <option value="Maine">Maine</option>
                                        <option value="Maryland">Maryland</option>
                                        <option value="Massachusetts">Massachusetts</option>
                                        <option value="Michigan">Michigan</option>
                                        <option value="Minnesota">Minnesota</option>
                                        <option value="Mississippi">Mississippi</option>
                                        <option value="Missouri">Missouri</option>
                                        <option value="Montana">Montana</option>
                                        <option value="Nebraska">Nebraska</option>
                                        <option value="Nevada">Nevada</option>
                                        <option value="New Hampshire">New Hampshire</option>
                                        <option value="New Jersey">New Jersey</option>
                                        <option value="New Mexico">New Mexico</option>
                                        <option value="New York">New York</option>
                                        <option value="North Carolina">North Carolina</option>
                                        <option value="North Dakota">North Dakota</option>
                                        <option value="Ohio">Ohio</option>
                                        <option value="Oklahoma">Oklahoma</option>
                                        <option value="Oregon">Oregon</option>
                                        <option value="Indiana">Indiana</option>
                                        <option value="Iowa">Iowa</option>
                                        <option value="Pennsylvania">Pennsylvania</option>
                                        <option value="Rhode Island">Rhode Island</option>
                                        <option value="South Carolina">South Carolina</option>
                                        <option value="South Dakota">South Dakota</option>
                                        <option value="Tennessee">Tennessee</option>
                                        <option value="Texas">Texas</option>
                                        <option value="Utah">Utah</option>
                                        <option value="Vermont">Vermont</option>
                                        <option value="Virginia">Virginia</option>
                                        <option value="Washington">Washington</option>
                                        <option value="West Virginia">West Virginia</option>
                                        <option value="Wisconsin">Wisconsin</option>
                                        <option value="Wyoming">Wyoming</option>
                                    </select>
                                </div>
                                <br>
                                <span class="sentence">
                                    <span id="statename1">My state</span> ranks <span id="categoryRank">#</span> in
                                    spending
                                    on
                                </span>
                                <div class="menuContainer active onLoadClass" id="categoryContainer">
                                    <select id="categoryMenu" style="display:none" ;>
                                        <option value="">Category </option>
                                        <option value="total">Total Spending</option>
                                        <option value="health">Health + Nutrition</option>
                                        <option value="financial">Financial Support</option>
                                        <option value="housing">Housing</option>
                                        <option value="education">Education</option>
                                        <option value="resources">Financial Resources</option>
                                    </select>
                                    <br>
                                    <span class="sentence">
                                        Abortion access in <span id="statename2">My State</span> is <span
                                            id="abortionRank">status</span>.
                                    </span>

                                </div>
                            </div>
                        </div>
                        <div class="container">
                            <br>
                            <hr width="50%">
                            <img src="./Images/Down-Arrow.png" width="20x">
                            <br>
                        </div>


                        <div class="flourish-embed" data-src="story/1770447" data-height="100vh">
                            <script src="https://public.flourish.studio/resources/embed.js"></script>
                        </div>
                        <p class="invisible"><a href="#story/1770447/slide-1"></a></p>
                        <p class="invisible"><a href="#story/1770447/slide-2"></a></p>


                    </div>

                    <div class="container">
                        <br>
                        <hr width="50%">
                        <img src="./Images/Down-Arrow.png" width="20x">
                        <br>
                    </div>

                    <h4 class="directions">Slide to see the what the Governor of Mississippi thinks about the overturn
                        of Roe and .</h4>
                    <div class="flourish-embed flourish-photo-slider" data-src="visualisation/12110443" data-height="100vh">
                        <script src="https://public.flourish.studio/resources/embed.js"></script>
                    </div>

                    <!-- <div id="my-wrapper">
                            <div class="headlines.life">
                                <h2 class="life">“Our state’s historic case before the United States Supreme Court was
                                    the
                                    catalyst for
                                    overturning Roe v.
                                    Wade and has made the nation safer for children than it was just a few short hours
                                    ago."
                                    <h4>Mississippi Governor</h4>
                            </div>

                            <h4>Carrying an unwanted pregnancy <span style="font-weight:bold;"> quadruples the odds
                                </span>
                                that a woman
                                and
                                her child will live below the federal poverty line, according to The Turnaway Study, a
                                University of
                                California
                                San Francisco research project that tracked women who got access to abortions versus
                                those
                                who’d been
                                denied
                                them over a 10-year period. It triples the chances of the woman being unemployed.
                            </h4> -->
                    <br><br>

                    <h4 class="directions">Scroll through the interactive visuals to compare pro-choice and pro-life
                        states.</h4>
                    <!--  <div class="container">
                <br>
                <hr width="50%">
                <img src="./Images/Down-Arrow.png" width="20x">
                <br>
            </div> -->





                    <div class="flourish-embed" data-src="story/1770472" data-height="100vh">
                        <script src="https://public.flourish.studio/resources/embed.js"></script>
                    </div>
                    <p class="invisible"><a href="#story/1770472/slide-1"></a></p>
                    <p class="invisible"><a href="#story/1770472/slide-2"></a></p>
                    <p>The red cluster represents <span class="proLife">pro-life</span> states. They spend less
                        on
                        children,and have higher poverty rates.<a href="#story/1770472/slide-3"></a></p>
                    <p>While the blue cluster represents <span class="proChoice">pro-choice</span> states that
                        spend
                        more on
                        children
                        with lower poverty rates<a href="#story/1770472/slide-4"></a></p>


                </div>

                <div class="container">
                    <br>
                    <hr width="50%">
                    <img src="./Images/Down-Arrow.png" width="20x">
                    <br>
                </div>

                <div class="flourish-embed" data-src="story/1762540" data-height="100vh">
                    <script src="https://public.flourish.studio/resources/embed.js"></script>
                </div>
                <!-- Here is where you add your captions, linking them to specific slides in the story -->
                <p>The reproductive rights index score include factors such as public insurance coverage, high
                    quality sex
                    education in schools, and access to infertility treatments. <a href="#story/1762540/slide-1"></a>
                </p>

                <p>Several <span class="proLife">Pro-life</span> states have banned abortion or significantly
                    weakened abortion
                    access. <br> These same pro-life states have the weakest maternal and child health outcomes,
                    and
                    they spend
                    significantly less money than <span class="proChoice">pro-choice</span> states taking care
                    of
                    families<a href="#story/1762540/slide-1"></a></p>


                <h2>Where does state spending for families go?</h2>

                <div>
                    <div class="row" style=justify-content: center>
                        <div class="column">
                            <div style='display: flex; justify-content: center;' class="rollover1">
                            </div>
                        </div>
                        <div class="column">
                            <div style='display: flex; justify-content: center;' class="rollover2">
                            </div>
                        </div>
                        <div class="column">
                            <div style='display: flex; justify-content: center;' class="rollover3">
                            </div>
                        </div>
                        <div class="column">
                            <div style='display: flex; justify-content: center;' class="rollover4">
                            </div>
                        </div>
                        <div class="column">
                            <div style='display: flex; justify-content: center;' class="rollover5">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="container">
                    <br>
                    <hr width="50%">
                    <img src="./Images/Down-Arrow.png" width="20x">
                    <br>
                </div>

                <h2>How do pro-life and pro-choice states stack up in spending by category?</h2>

                <!--  <div class="flourish-embed" data-src="story/1769151" data-height="100vh">
                    <script src="https://public.flourish.studio/resources/embed.js"></script>
                </div>
                <p>There is a 26% decrease in spending on education in <span class="proLife">pro-life
                        states.</span><a href="#story/1769151/slide-1"></a></p>

                <p><span class="proLife">Pro-life</span> states spend 23% less on direct payments to families
                    than
                    <span class="proChoice">pro-choice</span> states<a href="#story/1769151/slide-2"></a></p>

                <p><span class="proLife">Pro-life</span> states spend on average, 16% less than <span
                        class="proChoice">pro-choice</span> states on health and nutrition services.<a
                        href="#story/1769151/slide-3"></a></p>

                <p><span class="proLife">Pro-life</span> states spend on average, $200 less than <span
                        class="proChoice">pro-choice</span> states on public resources such as libraries and
                    parks.<a href="#story/1769151/slide-4"></a></p>

                <p>Housing is by far the category with the biggest difference, with <span
                        class="proLife">pro-life</span> states
                    spending 61% less than <span class="proChoice">pro-choice</span> states .<a
                        href="#story/1769151/slide-5"></a></p>

                <br> -->
                <h4>Click through to learn more about each category</h4>
                <div class="flourish-embed" data-src="story/1770479" data-height="100vh">
                    <script src="https://public.flourish.studio/resources/embed.js"></script>
                </div>

                <div class="container">
                    <br>
                    <hr width="50%">
                    <img src="./Images/Down-Arrow.png" width="20x">
                    <br>
                </div>



                <br><br><br>

                <h4>Scroll to see how state rankings match up against all spending categories. Darker colored
                    indicate higher
                    ranks.
                    States are ordered by reproductive rights scores.</h4>

                <div class="background">
                    <div class="flourish-embed flourish-heatmap" data-src="visualisation/12012702" data-height="100vh">
                        <script src="https://public.flourish.studio/resources/embed.js"></script>
                    </div>
                </div>
                <div class="container">
                    <br>
                    <hr width="50%">
                    <img src="./Images/Down-Arrow.png" width="20x">
                    <br>
                </div>

                <div class="flourish-embed flourish-map" data-src="visualisation/11864887" data-height="100vh">
                    <script src="https://public.flourish.studio/resources/embed.js"></script>
                </div>

                <h2>"One upside of Dobbs is that it makes possible broad coalitions of people of goodwill who,
                    despite their
                    disagreement on the fundamental question of abortion, agree that we must all work to provide
                    for
                    the needs
                    of mothers, children and families in crisis."</h2>
                <h4>Washington Post opinion page</h4>
                <br>




                <br>
                <div class="text">
                    <h3><strong>About</strong></h3>
                    <h4>This was a graduate project </h4>


                </div>

                <h2>Social Share</h2>

                </span>

            </div>


        </div>
</body>


<!-- Add the Flourish Scrolly library -->
<script src="https://cdn.flourish.rocks/flourish-scrolly-v3.1.0.min.js" type="text/javascript"></script>

<!-- Initialize the library to turn your story into scrolly magic! -->
<script>
    initFlourishScrolly({
        trigger_point: "10%",
        offset_top: "100px",
        step_styles: {
            background: "white",
            color: "darkgrey",
            fontSize: "16px",
            opacity: 0.9,
        }
    });
</script>
</div>
</div>
</div>
</body>

</html>

<style>
    .body {
        background-color: #ffffff;
        max-width: 760px;
        margin: 0 auto;
        align-content: center;

    }

    .paragraph {
        display: flex;
    }

    .text {
        align-self: flex-end;
    }

    .header {
        margin: -10 0 0 -20;
        padding: 40 30;
    }

    .margins {
        width: 80%;
        padding: 40;
        margin: 0 auto;


    }

    p {
        font-family: 'Roboto Condensed';
        font-size: 14px;
        line-height: 1.8em;
    }

    h1 {
        font-family: 'Roboto Condensed';
        font-size: 68px;
        text-align: center;
        font-weight: 400;
        padding: 10 10 10 10;
        line-height: 1em;
    }

    h2 {
        font-family: 'Roboto Condensed';
        font-size: 20px;
        line-height: 1.4em;
        font-weight: 300;
        padding-left: 10;
        text-align: left;
        background-color: #ffffff;
        color: #a5a5a0;


    }

    h2.life {
        font-family: 'Roboto Condensed';
        font-size: 20px;
        line-height: 1.4em;
        font-weight: 200;
        text-align: left;
        background-color: #ffffff;
        color: #990612;


    }

    h3 {
        font-family: 'Roboto Condensed';
        font-size: 18px;
        font-weight: 300;
        padding-left: 10px;
        margin-top: -50px;
        font-weight: 100;
        line-height: 1.55em;
        text-align: left;
    }

    h4 {
        font-family: 'Roboto Condensed';
        font-size: 14px;
        font-weight: 200;
        line-height: 1.45em;
        padding-top: 10px;
        padding-left: 10;
        margin-left: 20px;
        margin-right: 0px
    }

    h4.directions {
        font-style: italic;
        text-align: center;
        padding-top: -40px;
    }


    .proLife {
        color: #990612;
        font-weight: 900;
    }

    .proChoice {
        color: #003F5C;
        font-weight: 900;
    }

    .highlight2 {
        color: #990612;
    }


    .highlight-container,
    .highlight {
        position: relative;

    }


    .background {
        background-image: url ("./Images/test_background.png");
    }

    .container {
        line-height: 1.4;
        text-align: center;
        padding: 44px;
        color: #333;
        margin: 0 auto;
    }

    .imageContainer {
        margin-left: auto;
        margin-right: auto;
        flex-wrap: wrap;
        /* or inline-flex */

    }

    image {
        margin-left: auto;
        margin-right: auto;
        object-fit: contain;
    }

    .highlight-container,
    .highlight {
        position: relative;
        text-decoration: underline #990612;
        text-decoration-skip-ink: none;
        text-decoration-thickness: 1px;
        text-underline-offset: 0.2rem;
    }

    .highlight-container {
        display: inline-block;
    }

    .highlight-container:before {
        content: " ";
        display: block;
        height: 90%;
        margin-left: -3px;
        margin-right: -3px;
        position: absolute;
        opacity: 0.5;
        top: -1px;
        left: -1px;
        color: #990612;
        padding: 3px 3px 3px 3px;
    }

    .highlight2-container,
    .highlight2 {
        position: relative;
    }

    .highlight2-container {
        display: inline-block;
    }

    .highlight2-container:before {
        content: " ";
        display: block;
        height: 90%;
        width: 100%;
        margin-left: -3px;
        margin-right: -3px;
        position: absolute;
        color: #990612;
        opacity: 0.9;
        top: -1px;
        left: -1px;
        padding: 10px 3px 3px 10px;
    }

    .fl-scrolly-step {
        color: #6e6969 !important;
        font-family: Roboto Condensed;
        font-weight: 100;
    }

    .flourish-embed {
        align-content: center;
        padding-bottom: -105px;
    }


    /* To hide a caption, add class="invisible" to the <p> tag of that caption */
    .invisible {
        opacity: 0 !important;
    }

    .rollover1 {
        display: block;
        width: 197px;
        height: 227px;
        background: url("./Images/education_front_smaller.png") no-repeat;
        -webkit-transition: all .7s ease-in-out;
        -moz-transition: all .7s ease-in-out;
        -o-transition: all .7s ease-in-out;
        transition: all .7s ease-in-out;
    }

    .rollover1:hover {
        background: url(./Images/education_back_smaller.png)
    }

    .rollover2 {
        display: block;
        width: 197px;
        height: 227px;
        background: url("./Images/payments_front_smaller.png") no-repeat;
        -webkit-transition: all .7s ease-in-out;
        -moz-transition: all .7s ease-in-out;
        -o-transition: all .7s ease-in-out;
        transition: all .7s ease-in-out;
    }

    .rollover2:hover {
        background: url(./Images/payments_back_smaller.png)
    }

    .rollover3 {
        display: block;
        width: 197px;
        height: 227px;
        background: url("./Images/health_front_smaller.png") no-repeat;
        -webkit-transition: all .7s ease-in-out;
        -moz-transition: all .7s ease-in-out;
        -o-transition: all .7s ease-in-out;
        transition: all .7s ease-in-out;
    }

    .rollover3:hover {
        background: url(./Images/health_back_smaller.png)
    }

    .rollover4 {
        display: block;
        width: 197px;
        height: 227px;
        background: url("./Images/public_front_smaller.png") no-repeat;
        -webkit-transition: all .7s ease-in-out;
        -moz-transition: all .7s ease-in-out;
        -o-transition: all .7s ease-in-out;
        transition: all .7s ease-in-out;
    }

    .rollover4:hover {
        background: url(./Images/public_back_smaller.png)
    }

    .rollover5 {
        display: block;
        width: 197px;
        height: 227px;
        background: url("./Images/housing_front_smaller.png") no-repeat;
        -webkit-transition: all .7s ease-in-out;
        -moz-transition: all .7s ease-in-out;
        -o-transition: all .7s ease-in-out;
        transition: all .7s ease-in-out;
    }

    .rollover5:hover {
        background: url(./Images/housing_back_smaller.png)
    }

    #controls {
        width: 100%;
    }

    #sentence {
        font-family: 'Roboto Condensed', sans-serif;
        top: 60px;
        position: relative;
        margin: 0 auto;
        width: 80%;
        text-align: center;
        line-height: 58px;
        margin-bottom: 80px;
    }

    span.sentence {
        font-size: 24px;
        font-weight: 100;
    }

    #locationContainer,
    #categoryContainer {
        margin-top: 20px;
    }


    .menuContainer {
        display: inline;
        margin-right: 10px;
        margin-left: 10px;
        top: -15px;
        position: relative;
    }

    .menuContainer,
    .menuContainerYears {
        display: inline;
        margin-right: 10px;
        margin-left: 10px;
        top: -15px;
        position: relative;
    }

    .menuContainer.active.onLoadClass .ui-selectmenu-button {
        /* color: white !important; */
        background: url(../../Images/select-2x.png) no-repeat right #a5a5a0;
        ;
        background-size: 53px 53px !important;
    }

    .menuContainer.active .ui-selectmenu-button {
        /* color: white !important; */
        background: url(/Images/urban-select-active.png) no-repeat right #094c6a;
        background-size: 53px 53px;
    }

    .menuContainer.active .ui-selectmenu-button {
        /* color: white !important; */
        background: url(./Images/urban-select-active.png) no-repeat right #094c6a;
        background-size: 53px 53px;
    }

    option {
        font-weight: normal;
        display: block;
        white-space: nowrap;
        min-height: 1.2em;
        padding: 0px 2px 1px;
    }

    select {
        writing-mode: horizontal-tb !important;
        text-rendering: auto;
        color: fieldtext;
        letter-spacing: normal;
        word-spacing: normal;
        line-height: normal;
        text-transform: none;
        text-indent: 0px;
        text-shadow: none;
        text-align: start;
        white-space: pre;
        -webkit-rtl-ordering: logical;
        cursor: default;
    }

    select:not(:-internal-list-box) {
        overflow: visible !important;

    }

    ul {
        list-style: none;
    }

    .ui-selectmenu-button.ui-button {
        text-align: left;
        white-space: nowrap;
        height: 30px;
        background: url ("./Images/select-2x.png") no-repeat right #16d27a;
        background-size: 53px 53px;
        border: none;
        color: white;
        margin-right: 12px;
        padding-top: 19px;
        width: auto;
    }

    .ui-corner-all,
    .ui-corner-bottom,
    .ui-corner-right,
    .ui-corner-br {
        border-bottom-right-radius: 0px;
    }

    .ui-corner-all,
    .ui-corner-bottom,
    .ui-corner-left,
    .ui-corner-bl {
        border-bottom-left-radius: 0px;
    }

    .ui-button {
        padding: 0.4em 1em;
        display: inline-block;
        position: relative;
        line-height: normal;
        margin-right: 0.1em;
        cursor: pointer;
        vertical-align: middle;
        text-align: center;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        overflow: visible;
    }

    .ui-selectmenu-text {
        display: block;
        position: relative;
        margin-right: 31px;
        overflow: hidden;
        text-overflow: ellipsis;
        font-family: 'Roboto Condensed';
        font-weight: 100;
        margin-top: -5px;
        font-size: 24px;
    }

    .ui-widget-content {
        background: #ffffff;
        color: #003F5C;
    }

    #hide-np {
        display: none;
    }

    .locationMenu.disabled {
        opacity: .3;
    }

    /* Three image containers (use 25% for four, and 50% for two, etc) */
    .column {
        float: left;
        width: auto;
        padding: 5px;
    }

    /* Clear floats after image containers */
    .row::after {
        content: "";
        clear: both;
        display: table;
    }
</style>

<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>

<!--
	jQuery, a library that does a variety things, including DOM manipulation.
	
	Note: jQuery refers to itself as `$`, so in the same way you might call `d3.method()`
	for d3 functions you call `$.method()` for jQuery functions). If you want to use Svelte,
	then JS might get confused about also using `$` for `$:` declarations. Here's a
	stackoverflow thread of resolving this!
	
	https://stackoverflow.com/questions/58219453/how-do-i-use-jquery-in-svelte
-->
<script src="https://code.jquery.com/jquery-3.6.0.js"></script>

<!--
	jQuery-UI is a separate plugin to jQuery, which we're using to create `selectmenu`
	elements. Check out the docs for selectmenu, here:
	
	https://jqueryui.com/selectmenu/
	Lots of other cool elements available here as well!
-->
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>

<!--
		Some dummy data. If you have a CSV document with column headers `state`,
		`incomeRank`, and `educationRank`, then d3 will read it in to this format.
		Check out the d3 docs for more info
		https://github.com/d3/d3-dsv
		Note: some front end developers will tell you that it's not a best practice
		to include both jQuery and d3 in a single project, since they do similar things
		(DOM manipulation). While that's true for production-level sites, I think it's
		100% fine to use both here.
	-->

<script>
    let csvData = {};
    d3.csv("./State_wide_2.csv", function (data) {
        for (var i = 0; i < data.length; i++) {
            csvData[data[i].State] = data[i];
        }
    });
</script>

<!--
            This code does two things:
            1.	the call to `selectmenu` creates the UI element (i.e. hides the `select`
                element and creates the styled divs/spans which work like a dropdown)
            2.	the `change` event handler does something when the value of the menu changes
                (see the docs linked above for more useful methods)
        -->
<script>
    $("#stateMenu").selectmenu({
        change: function (event, ui) {
            showRankInfo();
            if (ui.item.value !== '') {
                document.getElementById('statename1').innerText = ui.item.value;
                document.getElementById('statename2').innerText = ui.item.value;
                document.getElementById('statename3').innerText = ui.item.value;

            } else {
                document.getElementById('statename1').innerText = 'My state';
                document.getElementById('statename2').innerText = 'My state';
            }
            displayRank(getRank(ui.item.value, getCategory()))
        }
    });

    $("#categoryMenu").selectmenu({
        change: function (event, ui) {
            showRankInfo();
            displayRank(getRank(getState(), ui.item.value))
        }
    });

    function ordinal(n) {
        const s = ["th", "st", "nd", "rd"];
        const v = n % 100;
        return n + (s[(v - 20) % 10] || s[v] || s[0]);
    }

    function showRankInfo() {
        const state = getState(),
            category = getCategory(),
            categoryRankSpan = document.getElementById('categoryRank');
        abortionRankSpan = document.getElementById('abortionRank');
        if (state !== '') {
            const stateData = csvData[state];
            const abortionData = stateData['abortionRank'] || 'status';
            abortionRankSpan.innerText = abortionData;
        } else {
            abortionRankSpan.innerText = 'status';
        }
        if (state !== '' && category !== '') {
            const stateData = csvData[state];
            const categoryData = stateData[category + 'Rank'],
                categoryDataNum = Number(categoryData);
            categoryRankSpan.innerText = ordinal(categoryDataNum);
        } else {
            categoryRankSpan.innerText = '#';
        }
    }

    function getRank(State, Category) {}
    // let stateDatum = data.filter(s => s.State == State)[0]

    /* <!-- 
            I wrote this in one line, but to break it down:
            1. 	data.filter is a JS built in function which takes an array and returns
                a filtered copy of it, based on certain criteria.
                See more info here:
                https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter
                Note that MDN is a great resource for JS, HTML, and CSS documentation (for vanilla JS)
            2.	Filter works by looking at every element in an array, and seeing if it matches your criteria.
                So an identical way to write this would be:
                let stateDatum = data.filter(function(s){
                    return s.state == State
                })[0]
                We're checking if the `state` property of each datum in the array is equal to the `state`
                variable that was passed as a parameter to `getRank()`
            3. 	Since `filter` returns an array (in this case an array of length 1), we need to grab the first
                element of the array, hence the `[0]`
            --> 
            
        /*
            Once we've grabbed the datum, use the `category` variable which was passed in
            as a string to get the relevant rank. So if category is "health", we return
            stateDatum["healthRank"].
            Could have this whole function in one line as
            `return data.filter(s => s.state == state)[0][category + "Rank"]`
            but I thought that wasn't the nicest looking
        */


    /*
        Two `getter` functions. When you call `getRank`, you need two values
        (`state` and `category`). One of those two values will be provided
        within the event handler for the related dropdown menu, but you'll
        need to grab the other value from the current status of the other dropdown
    */
    function getCategory() {
        return $("#categoryMenu").val()
    }

    function getState() {
        return $("#stateMenu").val()
    }

    /*
        Use jQuery to change the text inside the `rankLabel` span
        I believe your prototype had "1st" "2nd" "3rd" etc text, which
        you can handle the logic for in this function if you'd like
    */
    function displayRank(rank) {
        $("#rankLabel").text(rank)


    }
</script>

</html>
